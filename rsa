#!/usr/bin/env python3

import sys
import math

def is_prime(n):
    if n <= 1:
        return False
    if n <= 3:
        return True
    if n % 2 == 0 or n % 3 == 0:
        return False
    i = 5
    while i * i <= n:
        if n % i == 0 or n % (i + 2) == 0:
            return False
        i += 6
    return True

def next_prime(n):
    if n <= 1:
        return 2
    prime = n
    found = False
    while not found:
        prime += 1
        if is_prime(prime):
            found = True
    return prime

def factorize_rsa(n):
    p = 2
    while n % p != 0:
        p = next_prime(p)
    q = n // p
    return p, q

def main():
    if len(sys.argv) != 2:
        print("Usage: {} <file>".format(sys.argv[0]))
        sys.exit(1)

    input_file = sys.argv[1]

    try:
        with open(input_file, 'r') as f:
            numbers = f.read().splitlines()
    except FileNotFoundError:
        print("File not found:", input_file)
        sys.exit(1)

    for number_str in numbers:
        try:
            number = int(number_str)
        except ValueError:
            print("Invalid number:", number_str)
            continue

        p, q = factorize_rsa(number)

        print("{}={}*{}".format(number, p, q))

if __name__ == "__main__":
    main()
